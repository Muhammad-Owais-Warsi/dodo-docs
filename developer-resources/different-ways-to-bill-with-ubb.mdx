---
title: Different ways to bill with Usage Based Billing.
description: This guide demonstrates different ways a business can bill the customers using Usage Based Billing.
icon: "credit-card"
---

## Table of contents
- Billing on the basis of API calls.
- Billing on the basis of Token usage.
- Billing on the basis of runtime (Execution Time)

## Billing on the basis of number of API calls

In this section you'll see how the business can charge on the basis of the number of API calls made by their customers.

### Creating a Meter

<Frame>
    <img src="/images/different-ways-to-bill-with-ubb/api-call-meter.png" alt="API Call Meter" />
</Frame>

<Steps>
<Step title="Configure Basic Information">
Set up the fundamental details for your meter.

<ParamField path="Meter Name" type="string" required>
Choose a clear, descriptive name that identifies what this meter tracks.

Example: "API Calls"
</ParamField>

<ParamField path="Description" type="string">
Provide a detailed explanation of what this meter measures.

Example: "Counts each POST /v1/orders request made by the customer"
</ParamField>

<ParamField path="Event Name" type="string" required>
Specify the event identifier that will trigger this meter.

Examples: "api.call"
</ParamField>

<Info>
The event name must match exactly what you send in your usage events. Event names are case-sensitive.
</Info>
</Step>

<Step title="Configure Aggregation Settings">
Define how the meter calculates usage from your events.

<ParamField path="Aggregation Type" type="string" required>
Select how events should be aggregated:
To calculate the number of API calls go wtih `Count` type.

</ParamField>


<ParamField path="Measurement Unit" type="string" required>
Define the unit label for display purposes in reports and billing.

Example: "calls"
</ParamField>
</Step>

<Step title="Configure Event Filtering (Optional)">
Set up criteria to control which events are included in the meter.


**Enable Event Filtering**

Toggle **Enable Event Filtering** to activate conditional event processing.

**Choose Filter Logic**

Select how multiple conditions are evaluated

<Tabs>
<Tab title="AND Logic">
All conditions must be true for an event to be counted. Use this when you need events to meet multiple strict criteria simultaneously.

**Example:** Count API calls where `user_tier = "premium"` AND `endpoint = "/v1/orders"`
</Tab>

<Tab title="OR Logic">
At least one condition must be true for an event to be counted. Use this when you want to include events that meet any of several criteria.

**Example:** Count events where `method = "POST"` OR `method = "PUT"` OR `method = "DELETE"`
</Tab>
</Tabs>

**Setting Up Filter Conditions**

<Steps>
<Step title="Add Condition">
Click **Add condition** to create a new filter rule.
</Step>

<Step title="Configure Property Key">
Specify the property name from your event metadata.
</Step>

<Step title="Select Comparator">
Choose from available operators:
- `equals` - Exact match
- `not equals` - Exclusion filter
- `greater than` - Numeric comparison  
- `greater than or equals` - Numeric comparison (inclusive)
- `less than` - Numeric comparison
- `less than or equals` - Numeric comparison (inclusive)
- `contains` - String contains substring
- `does not contain` - String exclusion filter
</Step>

<Step title="Set Comparison Value">
Set the target value for comparison.
</Step>

<Step title="Add Groups">
Use **Add Group** to create additional condition groups for complex logic.
</Step>
</Steps>


<Warning>
Filtered properties must be included in your event metadata for the conditions to work properly. Events missing required properties will be excluded from counting.
</Warning>
</Step>

<Step title="Create Meter">
Review your meter configuration and click on **Create Meter**.

<Check>
Your meter is now ready to receive and aggregate usage events.
</Check>

</Step>
</Steps>

### Ingest an Event

Ingest event to your configured meter using Events API:

<CodeGroup>
```javascript Node.js
const response = await fetch('https://test.dodopayments.com/events/ingest', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    events: [
      {
        event_id: "api_call_1234",
        customer_id: "cust_id_123", 
        event_name: "api.call",
        timestamp: new Date().toISOString(),
      }
    ]
  })
});
```

```python Python
import requests
from datetime import datetime

response = requests.post(
    'https://test.dodopayments.com/events/ingest',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    json={
        'events': [
            {
                'event_id': 'api_call_1234',
                'customer_id': 'cust_id_123',
                'event_name': 'api.call',
                'timestamp': datetime.now().isoformat(),
            }
        ]
    }
)
```

```curl cURL
curl -X POST 'https://test.dodopayments.com/events/ingest' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "events": [
      {
        "event_id": "api_call_1234",
        "customer_id": "cust_id_123",
        "event_name": "api.call", 
        "timestamp": "2024-01-15T10:30:00Z",
      }
    ]
  }'
```
</CodeGroup>


## Billing on the basis of Token Usage

In this section you'll see how the business can charge on the basis of Token usage by their customers.

### Creating a Meter

<Frame>
    <img src="/images/different-ways-to-bill-with-ubb/token-usage-meter.png" alt="Token Usage Meter" />
</Frame>

<Steps>
<Step title="Configure Basic Information">
Set up the fundamental details for your meter.

<ParamField path="Meter Name" type="string" required>
Choose a clear, descriptive name that identifies what this meter tracks.

Example: "Tokens"
</ParamField>

<ParamField path="Description" type="string">
Provide a detailed explanation of what this meter measures.

Example: "Counts the token usage by the customers"
</ParamField>

<ParamField path="Event Name" type="string" required>
Specify the event identifier that will trigger this meter.

Example: "token"
</ParamField>

<Info>
The event name must match exactly what you send in your usage events. Event names are case-sensitive.
</Info>
</Step>

<Step title="Configure Aggregation Settings">
Define how the meter calculates usage from your events.

<ParamField path="Aggregation Type" type="string" required>
Select how events should be aggregated:
To calculate the Token usage go wtih `Sum` type.

</ParamField>

<ParamField path="Over Property" type="string">
The property name from event metadata to aggregate over. Here, aggregate it over `token` field.

<Warning>
This field is required when using Sum, Max, or Last aggregation types.
</Warning>
</ParamField>

<ParamField path="Measurement Unit" type="string" required>
Define the unit label for display purposes in reports and billing.

Example: "token"
</ParamField>
</Step>

<Step title="Configure Event Filtering (Optional)">
Set up criteria to control which events are included in the meter.


**Enable Event Filtering**

Toggle **Enable Event Filtering** to activate conditional event processing.

**Choose Filter Logic**

Select how multiple conditions are evaluated

<Tabs>
<Tab title="AND Logic">
All conditions must be true for an event to be counted. Use this when you need events to meet multiple strict criteria simultaneously.

**Example:** Count Token usage on `endpoint = "/v1/ai"` **AND** `user_plan = "pro"` 
</Tab>

<Tab title="OR Logic">
At least one condition must be true for an event to be counted. Use this when you want to include events that meet any of several criteria.

**Example:** Count Token usage on `endpoint = "/v1/ai"` **OR** `endpoint = "/v1/chat"`
</Tab>
</Tabs>

**Setting Up Filter Conditions**

<Steps>
<Step title="Add Condition">
Click **Add condition** to create a new filter rule.
</Step>

<Step title="Configure Property Key">
Specify the property name from your event metadata.
</Step>

<Step title="Select Comparator">
Choose from available operators:
- `equals` - Exact match
- `not equals` - Exclusion filter
- `greater than` - Numeric comparison  
- `greater than or equals` - Numeric comparison (inclusive)
- `less than` - Numeric comparison
- `less than or equals` - Numeric comparison (inclusive)
- `contains` - String contains substring
- `does not contain` - String exclusion filter
</Step>

<Step title="Set Comparison Value">
Set the target value for comparison.
</Step>

<Step title="Add Groups">
Use **Add Group** to create additional condition groups for complex logic.
</Step>
</Steps>


<Warning>
Filtered properties must be included in your event metadata for the conditions to work properly. Events missing required properties will be excluded from counting.
</Warning>
</Step>

<Step title="Create Meter">
Review your meter configuration and click on **Create Meter**.

<Check>
Your meter is now ready to receive and aggregate usage events.
</Check>

</Step>
</Steps>


### Ingest an Event

Ingest event to your configured meter using Events API:

<CodeGroup>
```javascript Node.js
const response = await fetch('https://test.dodopayments.com/events/ingest', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    events: [
      {
        event_id: "token_usage_1234",
        customer_id: "cust_id_123", 
        event_name: "token",
        timestamp: new Date().toISOString(),
        metadata: {
          tokens: 100
        }
      }
    ]
  })
});
```

```python Python
import requests
from datetime import datetime

response = requests.post(
    'https://test.dodopayments.com/events/ingest',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    json={
        'events': [
            {
                'event_id': 'token_usage_1234',
                'customer_id': 'cust_id_123',
                'event_name': 'token',
                'timestamp': datetime.now().isoformat(),
                'metadata': {
                  'tokens': 100
                }                
            }
        ]
    }
)
```

```curl cURL
curl -X POST 'https://test.dodopayments.com/events/ingest' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "events": [
      {
        "event_id": "token_usage_1234",
        "customer_id": "cust_id_123",
        "event_name": "token", 
        "timestamp": "2025-10-8T10:30:00Z",
        metadata: {
          tokens: 100
        }
      }
    ]
  }'
```
</CodeGroup>


## Billing on the basis of Runtime (Execution Time)

In this section you'll see how the business can charge on the basis of runtime by their customers.

### Creating a Meter

<Frame>
    <img src="/images/different-ways-to-bill-with-ubb/execution-time-meter.png" alt="Execution Time Meter" />
</Frame>

<Steps>
<Step title="Configure Basic Information">
Set up the fundamental details for your meter.

<ParamField path="Meter Name" type="string" required>
Choose a clear, descriptive name that identifies what this meter tracks.

Example: "Compute Hours"
</ParamField>

<ParamField path="Description" type="string">
Provide a detailed explanation of what this meter measures.

Example: "Count the total compute hours by the customer"
</ParamField>

<ParamField path="Event Name" type="string" required>
Specify the event identifier that will trigger this meter.

Example: "compute.hour"
</ParamField>

<Info>
The event name must match exactly what you send in your usage events. Event names are case-sensitive.
</Info>
</Step>

<Step title="Configure Aggregation Settings">
Define how the meter calculates usage from your events.

<ParamField path="Aggregation Type" type="string" required>
Select how events should be aggregated:
To calculate the Runtime go wtih `Sum` type.

</ParamField>

<ParamField path="Over Property" type="string">
The property name from event metadata to aggregate over. Here, aggregate it over `hour` field.

<Warning>
This field is required when using Sum, Max, or Last aggregation types.
</Warning>
</ParamField>

<ParamField path="Measurement Unit" type="string" required>
Define the unit label for display purposes in reports and billing.

Example: "hours"
</ParamField>
</Step>

<Step title="Configure Event Filtering (Optional)">
Set up criteria to control which events are included in the meter.


**Enable Event Filtering**

Toggle **Enable Event Filtering** to activate conditional event processing.

**Choose Filter Logic**

Select how multiple conditions are evaluated

<Tabs>
<Tab title="AND Logic">
All conditions must be true for an event to be counted. Use this when you need events to meet multiple strict criteria simultaneously.

**Example:** Count compute hours where `execution_time > 60` **AND** `model_type = "advanced"`
</Tab>

<Tab title="OR Logic">
At least one condition must be true for an event to be counted. Use this when you want to include events that meet any of several criteria.

**Example:** Count compute hours where `hours > 60` **OR** `model_type = "advanced"`
</Tab>
</Tabs>

**Setting Up Filter Conditions**

<Steps>
<Step title="Add Condition">
Click **Add condition** to create a new filter rule.
</Step>

<Step title="Configure Property Key">
Specify the property name from your event metadata.
</Step>

<Step title="Select Comparator">
Choose from available operators:
- `equals` - Exact match
- `not equals` - Exclusion filter
- `greater than` - Numeric comparison  
- `greater than or equals` - Numeric comparison (inclusive)
- `less than` - Numeric comparison
- `less than or equals` - Numeric comparison (inclusive)
- `contains` - String contains substring
- `does not contain` - String exclusion filter
</Step>

<Step title="Set Comparison Value">
Set the target value for comparison.
</Step>

<Step title="Add Groups">
Use **Add Group** to create additional condition groups for complex logic.
</Step>
</Steps>


<Warning>
Filtered properties must be included in your event metadata for the conditions to work properly. Events missing required properties will be excluded from counting.
</Warning>
</Step>

<Step title="Create Meter">
Review your meter configuration and click on **Create Meter**.

<Check>
Your meter is now ready to receive and aggregate usage events.
</Check>

</Step>
</Steps>

### Ingest an Event

Ingest event to your configured meter using Events API:

<CodeGroup>
```javascript Node.js
const response = await fetch('https://test.dodopayments.com/events/ingest', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    events: [
      {
        event_id: "compute_hour_1234",
        customer_id: "cust_id_123", 
        event_name: "compute.hour",
        timestamp: new Date().toISOString(),
        metadata: {
          hour: 60
        }
      }
    ]
  })
});
```

```python Python
import requests
from datetime import datetime

response = requests.post(
    'https://test.dodopayments.com/events/ingest',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    json={
        'events': [
            {
                'event_id': 'compute_hour_1234',
                'customer_id': 'cust_id_123',
                'event_name': 'compute.hour',
                'timestamp': datetime.now().isoformat(),
                'metadata': {
                  'hour': 60
                }
            }
        ]
    }
)
```

```curl cURL
curl -X POST 'https://test.dodopayments.com/events/ingest' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "events": [
      {
        "event_id": "compute_hour_1234",
        "customer_id": "cust_id_123",
        "event_name": "compute.hour", 
        "timestamp": "2025-10-8T10:30:00Z",
        metadata: {
          hour: 60
        }
      }
    ]
  }'
```
</CodeGroup>